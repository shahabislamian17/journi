{
  "inc/layouts/checkout/checkout/form.php": [
    "\n                                                document.addEventListener( 'DOMContentLoaded', () => {\n                                                    const place = document.querySelector( '[data-button=\"1A\"] a.action' );\n                                                    let stripe = null;\n                                                    let elements = null;\n                                                    let paymentEl = null;\n                                                    if ( place ) {\n                                                        place.addEventListener( 'click', async ( e ) => {\n                                                            e.preventDefault();\n                                                            if ( ! stripe || ! elements || ! paymentEl ) {\n                                                                alert( 'Payment not ready. Please wait a moment and try again.' );\n                                                                return;\n                                                            }\n                                                            const r = await elements.submit();\n                                                            if ( r && r.error ) {\n                                                                alert( r.error.message );\n                                                                return;\n                                                            }\n                                                            const res = await fetch( '/inc/classes/stripe/setup.php', {\n                                                                method: 'POST',\n                                                                headers: {\n                                                                    'Accept': 'application/json',\n                                                                    'Content-Type': 'application/json'\n                                                                },\n                                                                body: JSON.stringify( {\n                                                                    mode: 'create_payment_intent'\n                                                                } )\n                                                            } );\n                                                            if ( ! res.ok ) {\n                                                                alert( 'Setup error. Please try again.' );\n                                                                return;\n                                                            }\n                                                            let payload = null;\n                                                            try {\n                                                                payload = await res.json();\n                                                            } catch ( e2 ) {\n                                                                alert( 'Invalid setup response.' );\n                                                                return;\n                                                            }\n                                                            const clientSecret = payload && payload.clientSecret ? payload.clientSecret : null;\n                                                            const paymentIntentId = payload && payload.paymentIntentId ? payload.paymentIntentId : null;\n                                                            const customerId = payload && payload.customerId ? payload.customerId : null;\n                                                            if ( paymentIntentId ) {\n                                                                sessionStorage.setItem( 'stripe_payment_intent_id', paymentIntentId );\n                                                            }\n                                                            if ( customerId ) {\n                                                                sessionStorage.setItem( 'stripe_customer_id', customerId );\n                                                            }\n                                                            if ( ! clientSecret ) {\n                                                                alert( 'Missing client secret.' );\n                                                                return;\n                                                            }\n                                                            const { error } = await stripe.confirmPayment( {\n                                                                elements: elements,\n                                                                clientSecret: clientSecret,\n                                                                confirmParams: {\n                                                                    return_url: '/checkout/confirmation'\n                                                                }\n                                                            } );\n                                                            if ( error ) {\n                                                                alert( error.message );\n                                                                return;\n                                                            }\n                                                        } );\n                                                    }\n                                                    try {\n                                                        if ( typeof Stripe !== 'function' ) {\n                                                            console.warn( 'Stripe.js not loaded.' );\n                                                            return;\n                                                        }\n                                                        stripe = Stripe( 'pk_test_BLnoKVAwr7St6BhZK22vpgrA' );\n                                                        const isMobile = document.documentElement.classList.contains( 'mobile' );\n                                                        const appearance = {\n                                                            theme: 'stripe',\n                                                            variables: {\n                                                                borderRadius: '11px',\n                                                                colorBackground: '#FFFFFF',\n                                                                colorDanger: '#101820',\n                                                                colorPrimary: '#101820',\n                                                                colorText: '#101820',\n                                                                fontFamily: 'InterVariable, sans-serif',\n                                                                fontSizeBase: '15px',\n                                                                gridColumnSpacing: '12px',\n                                                                gridRowSpacing: '12px'\n                                                            },\n                                                            rules: {\n                                                                '.Input': {\n                                                                    border: '1px solid #ECECEC',\n                                                                    boxShadow: 'none',\n                                                                    fontSize: '0.8625em',\n                                                                    fontVariationSettings: '\"opsz\" 22',\n                                                                    fontWeight: '450',\n                                                                    letterSpacing: '-0.0125em',\n                                                                    lineHeight: '1.3375em',\n                                                                    paddingLeft: '14px',\n                                                                    textTransform: 'capitalize'\n                                                                },\n                                                                '.Input:hover': {\n                                                                    boxShadow: 'none'\n                                                                },\n                                                                '.Input:focus': {\n                                                                    border: '1px solid #757576',\n                                                                    boxShadow: 'none'\n                                                                },\n                                                                '.Input--invalid': {\n                                                                    border: '1px solid #757576',\n                                                                    boxShadow: 'none'\n                                                                },\n                                                                '.Input--disabled': {\n                                                                    border: '1px solid #757576',\n                                                                    boxShadow: 'none'\n                                                                },\n                                                                '.Label': {\n                                                                    textTransform: 'capitalize'\n                                                                },\n                                                                '.Label--resting': {\n                                                                    fontSize: '0.8625em',\n                                                                    fontVariationSettings: '\"opsz\" 22',\n                                                                    fontWeight: '425',\n                                                                    letterSpacing: '-0.0125em'\n                                                                },\n                                                                '.Label--floating': {\n                                                                    fontSize: '0.7em',\n                                                                    fontVariationSettings: '\"opsz\" 22',\n                                                                    fontWeight: '425',\n                                                                    letterSpacing: '-0.0125em',\n                                                                    top: '1px'\n                                                                },\n                                                                '.Error': {\n                                                                    fontSize: '0.75em',\n                                                                    fontVariationSettings: '\"opsz\" 22',\n                                                                    fontWeight: '405',\n                                                                    letterSpacing: '-0.01325em',\n                                                                    margin: '8px 0 6px 1px'\n                                                                },\n                                                                '.TermsText': {\n                                                                    color: '#101820',\n                                                                    fontSize: '0',\n                                                                    margin: '0',\n                                                                    padding: '0'\n                                                                }\n                                                            },\n                                                            labels: 'floating'\n                                                        };\n                                                        if ( isMobile ) {\n                                                            appearance.variables.gridColumnSpacing = '10px';\n                                                            appearance.variables.gridRowSpacing = '10px';\n                                                            appearance.rules[ '.Input' ].fontSize = '16px';\n                                                            appearance.rules[ '.Input' ].lineHeight = '1.3em';\n                                                            appearance.rules[ '.Label--resting' ].fontSize = '0.975em';\n                                                            appearance.rules[ '.Label--floating' ].fontSize = '0.775em';\n                                                            appearance.rules[ '.Label--floating' ].top = '0.05em';\n                                                            appearance.rules[ '.Error' ].fontSize = '0.8em';\n                                                        }\n                                                        elements = stripe.elements( {\n                                                            mode: 'payment',\n                                                            amount: 50000,\n                                                            currency: 'gbp',\n                                                            captureMethod: 'manual',\n                                                            appearance: appearance,\n                                                            fonts: [\n                                                                {\n                                                                    cssSrc: 'https://rsms.me/inter/inter.css'\n                                                                }\n                                                            ]\n                                                        } );\n                                                        paymentEl = elements.create( 'payment', {\n                                                            fields: {\n                                                                billingDetails: {\n                                                                    email: 'auto',\n                                                                    name: 'auto',\n                                                                    address: {\n                                                                        country: 'auto',\n                                                                        postalCode: 'auto'\n                                                                    }\n                                                                }\n                                                            }\n                                                        } );\n                                                        paymentEl.mount( '.stripe' );\n                                                    } catch ( err ) {\n                                                        console.error( err );\n                                                    }\n                                                } );\n                                            "
  ],
  "inc/layouts/checkout/confirmation/prompt.php": [
    "\n            document.addEventListener( 'DOMContentLoaded', async () => {\n                const params = new URLSearchParams( window.location.search );\n                const piSecret = params.get( 'payment_intent_client_secret' );\n                const buttons = document.querySelectorAll( '[data-button=\"1A\"][data-action]' );\n                let paymentIntentId = sessionStorage.getItem( 'stripe_payment_intent_id' );\n                const customerId = sessionStorage.getItem( 'stripe_customer_id' );\n                if ( ! paymentIntentId && piSecret ) {\n                    const stripe = Stripe( 'pk_test_BLnoKVAwr7St6BhZK22vpgrA' );\n                    const { paymentIntent, error } = await stripe.retrievePaymentIntent( piSecret );\n                    if ( ! error && paymentIntent && paymentIntent.id ) {\n                        paymentIntentId = paymentIntent.id;\n                        sessionStorage.setItem( 'stripe_payment_intent_id', paymentIntentId );\n                    }\n                }\n                if ( ! paymentIntentId ) {\n                    console.warn( 'PaymentIntent not found.' );\n                    return;\n                }\n                const UNIT_AMOUNT = 10000;\n                const selectable = new Set( [ '1', '2', '3', '4', '5' ] );\n                const selected = new Set();\n                buttons.forEach( ( button ) => {\n                    const action = button.getAttribute( 'data-action' );\n                    const link = button.querySelector( 'a.action' );\n                    if ( ! link ) {\n                        return;\n                    }\n                    if ( selectable.has( action ) ) {\n                        link.addEventListener( 'click', ( e ) => {\n                            e.preventDefault();\n                            if ( link.getAttribute( 'aria-disabled' ) === 'true' ) {\n                                return;\n                            }\n                            if ( selected.has( action ) ) {\n                                selected.delete( action );\n                                button.classList.remove( 'selected' );\n                                button.querySelector( '.text' ).textContent = '\u20ac100';\n                            } else {\n                                selected.add( action );\n                                button.classList.add( 'selected' );\n                                button.querySelector( '.text' ).textContent = 'Charge \u20ac100';\n                            }\n                        } );\n                        return;\n                    }\n                    if ( action === '6' ) {\n                        link.addEventListener( 'click', async ( e ) => {\n                            e.preventDefault();\n                            if ( selected.size === 0 ) {\n                                alert( 'Please select at least one booking.' );\n                                return;\n                            }\n                            const payload = {\n                                actions: Array.from( selected ),\n                                paymentIntentId: paymentIntentId,\n                                customerId: customerId\n                            };\n                            const res = await fetch( '/inc/classes/stripe/payment.php', {\n                                method: 'POST',\n                                headers: {\n                                    'Accept': 'application/json',\n                                    'Content-Type': 'application/json'\n                                },\n                                body: JSON.stringify( payload )\n                            } );\n                            const data = await res.json();\n                            if ( data.error ) {\n                                alert( data.error );\n                                return;\n                            }\n                            selected.forEach( ( a ) => {\n                                const btn = document.querySelector( `[data-button=\"1A\"][data-action=\"${a}\"]` );\n                                if ( btn ) {\n                                    const aEl = btn.querySelector( 'a.action' );\n                                    btn.querySelector( '.text' ).textContent = 'Charged \u20ac100';\n                                    if ( aEl ) {\n                                        aEl.setAttribute( 'aria-disabled', 'true' );\n                                        aEl.style.pointerEvents = 'none';\n                                    }\n                                    btn.classList.remove( 'selected' );\n                                    btn.classList.add( 'disabled' );\n                                }\n                            } );\n                            selected.clear();\n                        } );\n                    }\n                } );\n            } );\n        "
  ]
}